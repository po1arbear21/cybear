$py(
# ============================================================================
# Vertical Perovskite FET - A07 Project (7nm Source Variant)
# ============================================================================
# Same as vfet_a07.ini but with 7nm source thickness
# ============================================================================

# === Geometry Parameters (nm) ===
W_ap_half = 5000      # Half aperture width (symmetry at x=0)
W_src = 5000          # Source finger width
L_domain = W_ap_half + W_src  # Total x-domain = 10 um

t_ox = 90             # Gate oxide thickness
t_source = 7          # Source metal thickness (7nm variant)
t_perov = 500         # Perovskite thickness (= channel length)

# === Derived coordinates ===
y_gate = -t_ox        # Bottom of oxide (gate electrode)
y_ox_top = 0          # Top of oxide / bottom of perovskite
y_src_top = t_source  # Top of source metal
y_drain = t_perov     # Top of perovskite (drain electrode)

x_src_edge = W_ap_half  # Source sidewall position

# === Material Parameters ===
eps_perov = 25
E_gap_perov = 1.6
N_v_perov = 1e18
mu_p_perov = 5
N_a_perov = 1e15
eps_ox = 3.9
phi_b_Au = 0.4
A_rich_p = 32

# === Mesh Parameters ===
dx_fine = 5
dy_fine = 2
dx_coarse = 50
dy_coarse = 20
)

[transport parameters]
  electrons  = false
  holes      = true
  N_c0       = 1e18           : 1/cm^3
  N_v0       = $(N_v_perov)   : 1/cm^3
  E_gap      = $(E_gap_perov) : eV
  dos        = "parabolic"
  dist       = "maxwell"
  reg_A      = 1e-12
  reg_B      = 0.001
  mob        = false
  curr_fact  = 1.0 : um

[grid]
  gtype  = "xy"
  max_dx = $(dx_coarse) : nm
  max_dy = $(dy_coarse) : nm

[poisson]
  name = "oxide"
  x    = 0, $(L_domain)  : nm
  y    = $(y_gate), $(y_ox_top) : nm
  eps  = $(eps_ox)       : eps0

[poisson]
  name = "perovskite"
  x    = 0, $(L_domain)  : nm
  y    = $(y_ox_top), $(y_drain) : nm
  eps  = $(eps_perov)    : eps0

[transport]
  x = 0, $(L_domain) : nm
  y = $(y_ox_top), $(y_drain) : nm

[doping]
  x    = 0, $(L_domain)  : nm
  y    = $(y_ox_top), $(y_drain) : nm
  acon = $(N_a_perov)    : 1/cm^3

[mobility]
  x     = 0, $(L_domain)  : nm
  y     = $(y_ox_top), $(y_drain) : nm
  mob_p = $(mu_p_perov)   : cm^2/V/s

[contact]
  name  = "GAT"
  type  = "gate"
  phims = 0.0            : V
  x     = 0, $(L_domain) : nm
  y     = $(y_gate), $(y_gate) : nm

[contact]
  name           = "SRC"
  type           = "schottky"
  phi_b          = $(phi_b_Au)    : eV
  A_richardson_p = $(A_rich_p)    : A/cm^2/K^2
  ifbl           = true
  x              = $(x_src_edge), $(x_src_edge) : nm
  y              = $(y_ox_top), $(y_src_top)    : nm

[contact]
  name           = "SRC"
  type           = "schottky"
  phi_b          = $(phi_b_Au)    : eV
  A_richardson_p = $(A_rich_p)    : A/cm^2/K^2
  ifbl           = true
  x              = $(x_src_edge), $(L_domain) : nm
  y              = $(y_src_top), $(y_src_top) : nm

[contact]
  name  = "DRN"
  type  = "ohmic"
  phims = 0.0            : V
  x     = 0, $(L_domain) : nm
  y     = $(y_drain), $(y_drain) : nm

[refine grid]
  dir = 1
  x   = $(x_src_edge - 20), $(x_src_edge + 20) : nm
  dx  = $(dx_fine), $(dx_fine) : nm
  e   = 1.0

[refine grid]
  dir = 2
  x   = $(y_src_top - 5), $(y_src_top + 10) : nm
  dx  = $(dy_fine), $(dy_fine) : nm
  e   = 1.0

[refine grid]
  dir = 2
  x   = $(y_ox_top - 5), $(y_ox_top + 10) : nm
  dx  = 1, 3 : nm
  e   = 1.5

[refine grid]
  dir = 2
  x   = 30, 450 : nm
  dx  = $(dy_coarse), $(dy_coarse) : nm
  e   = 1.0
