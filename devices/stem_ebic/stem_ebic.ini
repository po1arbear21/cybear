! STEM-EBIC Device Configuration
! Lamella dimensions from measurement data:
!   Total width: 14.00 μm
!   Silicon height: 8.5 μm (without oxide)
!   SiO2 thickness: 0.5 μm (on top)
!   Total height with oxide: 9.0 μm

[transport parameters]
  electrons  = true
  holes      = true
  N_c0       = 6.24672e15 : 1/cm^3
  N_v0       = 3.5e15     : 1/cm^3
  E_gap      = 1.12       : eV
  dos        = "parabolic"
  dist       = "maxwell"
  tabledir   = "tables/"
  stab       = "SG"
  reg_A      = 1e-12
  reg_B      = 0.001
  mob        = false
  alpha      =   0.77,   0.70
  beta       =    2.0,    1.0
  mob_min    =   74.5,  122.3 : cm^2/V/s
  mob_max    = 1430.0,  480.0 : cm^2/V/s
  N_ref      = 8.6e16, 1.4e17 : 1/cm^3
  v_sat      =    1e10,  1e10 : cm/s
  curr_fact  = 1.0 : um
  incomp_ion = false
  ii_tau     = 1.0, 1.0 : ps
  ii_E_dop0  = 45.5, 44.39 : meV
  ii_g       = 2.0, 4.0
  ii_N_crit  = 2e19, 2e19 : 1/cm^3
  ii_dop_th  = 1e25, 1e25 : 1/cm^3

  srh        = true           ! Enable SRH recombination
  srh_tau_n  = 1e-10 : s      ! Electron lifetime
  srh_tau_p  = 1e-10 : s      ! Hole lifetime


[grid]
  gtype  = "xy"
  max_dx = 100.0 : nm         ! Adjusted for larger device (14 μm width)
  max_dy = 100.0 : nm         ! Adjusted for larger device (9 μm height)

! SiO2 oxide on top (0.5 μm thick, y = 8.5-9.0 μm)
[poisson]
  x   = 0.0, 14.0 : um
  y   = 8.5, 9.0 : um
  eps = 3.9 : eps0

! Silicon region (y = 0 to 8.5 μm)
[poisson]
  x   = 0.0, 14.0 : um
  y   = 0.0, 8.5 : um
  eps = 11.7 : eps0

! Transport region (entire Si)
[transport]
  x = 0.0, 14.0 : um
  y = 0.0, 8.5 : um

! p-type doping (1.5 um below oxide, junction at y = 7.0 um)
[doping]
  x    = 0.0, 14.0 : um
  y    = 7.0, 8.5 : um
  acon = 1e18 : 1/cm^3

! n-type doping (below junction)
[doping]
  x    = 0.0, 14.0 : um
  y    = 0.0, 7.0 : um
  dcon = 1e18 : 1/cm^3

! Ohmic contact on p-side (right edge, top of Si)
! x = 14 μm, y = 8.0 to 8.5 μm
[contact]
  name = "P_CONTACT"
  type = "ohmic"
  x    = 14.0, 14.0 : um
  y    = 8.0, 8.5 : um

! Ohmic contact on n-side (left edge, bottom)
! x = 0, y = 0 to 1.5 μm
[contact]
  name = "N_CONTACT"
  type = "ohmic"
  x    = 0.0, 0.0 : um
  y    = 0.0, 1.5 : um

! STEM-EBIC beam sweep along y (top-view geometry)
[beam]
  beam_min  = 0.0 : um          ! Sweep minimum (y)
  beam_max  = 8.5 : um          ! Sweep maximum (y, full Si depth)
  beam_x    = 7.0 : um          ! Fixed x position (center of device)
  I_beam    = 0.0825 : nA/um     ! Beam current per unit depth (for 2D simulation)
  lamella_t = 100.0 : nm        ! Lamella thickness (beam path length through material)
  beam_dist = "point"           ! Point profile for top-view geometry

! Refine around the p-n junction (y = 7.0 um)
[refine grid]
  y  = 6.5, 7.0 : um
  dy = 20.0, 2.0 : nm    ! coarse to fine approaching junction
  e  = 1.0

[refine grid]
  y  = 7.0, 7.5 : um
  dy = 2.0, 20.0 : nm    ! fine to coarse leaving junction
  e  = 1.0

! Refine near contacts for better current extraction
[refine grid]
  x  = 0.0, 0.5 : um
  dx = 5.0, 50.0 : nm    ! fine near N_CONTACT
  e  = 1.0

[refine grid]
  x  = 13.5, 14.0 : um
  dx = 50.0, 5.0 : nm    ! fine near P_CONTACT
  e  = 1.0
