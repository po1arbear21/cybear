# A07: Vertical Perovskite FET Implementation

## Project Context
- **Collaboration**: TRR404 C02 (simulation) + A07 (perovskite VFET fabrication)
- **Base**: Existing 2D FVM drift-diffusion solver with Schottky contact model
- **Goal**: Simulate DC characteristics, understand current flow patterns through perforated source

---

## 1. Device Overview

### 1.1 Cross-Section Schematic

```
    y ^
      |
      |     ==================== DRAIN (Ohmic) ==================  y = t_perov
      |     |                                                   |
      |     |                    PEROVSKITE                     |
      |     |                  (transport region)               |
      |     |                                                   |
      |     |   |                                         |     |
      |     |   | <-- SOURCE_SIDE             SOURCE_TOP->|     |
      |  +--+===+ (Schottky)                   (Schottky) +===+--+  y = t_source
      |  |SOURCE|           APERTURE REGION              |SOURCE|
      |  +------+                                         +------+  y = 0
      |  ################################################################
      |                      OXIDE (Poisson only)
      |  ################################################################  y = -t_ox
      |                           GATE (CT_GATE)
      +-------------------------------------------------------------------------> x
         x=0       x=W_ap/2    x=W_ap/2+W_src              (half-aperture domain)
                  (symmetry)
```

### 1.2 Test Structure (Half-Aperture with Symmetry)

For initial simulations, use **half-aperture** geometry:
- x ∈ [0, W_ap/2 + W_src] = [0, 10 μm]
- y ∈ [-t_ox, t_perov] = [-90 nm, 500 nm]
- Symmetry BC at x = 0 (center of aperture)

### 1.3 Nominal Dimensions

| Parameter | Symbol | Value | Notes |
|-----------|--------|-------|-------|
| Half aperture width | W_ap/2 | 5 μm | Symmetry at x=0 |
| Source finger width | W_src | 5 μm | Estimate from AMO |
| Source thickness | t_source | 17 nm | Two values: 7/17 nm |
| Perovskite thickness | t_perov | 500 nm | Also = channel length |
| Gate oxide thickness | t_ox | 90 nm | SiO2 |

---

## 2. Codebase Analysis

### 2.1 Existing Infrastructure (Reusable)

| Component | File | Status | Notes |
|-----------|------|--------|-------|
| Schottky BC (Robin) | `src/schottky.f90` | Ready | TE + IFBL + tunneling |
| 2D tensor mesh | `src/grid_generator.f90` | Ready | With refinement regions |
| Gate contact (CT_GATE) | `src/contact.f90` | Ready | Dirichlet on φ, capacitive |
| Ohmic contact | `src/continuity.f90` | Ready | Dirichlet on n |
| Material parameters | `src/semiconductor.f90` | Ready | Flexible DOS/distribution |
| FVM solver | Newton iteration | Ready | Full Jacobian coupling |

### 2.2 Gate Contact Analysis

**Key Finding**: CT_GATE is **exactly what we need** for the MOS-like gate interface.

**How it works**:
1. Gate contact sets Dirichlet BC on potential: `φ = V_G + phims`
2. Gate is placed at bottom of oxide (y = -t_ox)
3. Oxide region included in Poisson domain (not transport domain)
4. Perovskite-oxide interface at y = 0 sees gate field through oxide capacitance
5. Band bending and accumulation emerge naturally from coupled Poisson-continuity

**Implementation** (from `src/device_params.f90:1176-1184`):
```fortran
! Contact auto-classification:
if (nv_conti == 0) then
  this%contacts(ict)%type = CT_GATE  ! No transport vertices = capacitive gate
else
  this%contacts(ict)%type = CT_OHMIC ! Has transport vertices = ohmic injection
end if
```

**No new BC type needed** - standard CT_GATE handles the gate-oxide-perovskite stack.

### 2.3 Schottky Contact Analysis

**Existing implementation** (`src/schottky.f90`):
- Thermionic emission: `J_TE = v_surf * (n - n0B)`
- Image force barrier lowering: `φ_b_eff = φ_b - sqrt(|E|/(4πε))`
- Tsu-Esaki tunneling: WKB integral for sub-barrier current
- Full Jacobian coupling for Newton convergence

**Two-segment approach for L-shaped source**:
- `SOURCE_SIDE`: x = W_ap/2, y ∈ [0, t_source] (sidewall injection)
- `SOURCE_TOP`: y = t_source, x ∈ [W_ap/2, domain_edge] (top surface injection)
- Same Schottky parameters for both segments
- Separate contacts allow analysis of injection distribution

---

## 3. Region Definitions

### 3.1 Poisson Domain (Electrostatics)

Includes oxide + perovskite (full domain):

| Region | x-range | y-range | ε_r | Notes |
|--------|---------|---------|-----|-------|
| SiO2 oxide | [0, L_domain] | [-t_ox, 0] | 3.9 | Gate dielectric |
| Perovskite | [0, L_domain] | [0, t_perov] | 25-30 | High-κ material |

### 3.2 Transport Domain (Drift-Diffusion)

Perovskite only (no transport in oxide or metal):

| Region | x-range | y-range | Notes |
|--------|---------|---------|-------|
| Aperture perovskite | [0, W_ap/2] | [0, t_source] | Inside aperture |
| Bulk perovskite | [0, L_domain] | [t_source, t_perov] | Above source |
| Full perovskite | [0, W_ap/2] | [0, t_perov] | Unified region |

### 3.3 Contact Definitions

| Contact | Type | Location | Parameters |
|---------|------|----------|------------|
| GATE | CT_GATE | y = -t_ox, x ∈ [0, L_domain] | phims ~ 0 (adjust for V_FB) |
| SOURCE_SIDE | CT_SCHOTTKY | x = W_ap/2, y ∈ [0, t_source] | φ_b, A*, IFBL |
| SOURCE_TOP | CT_SCHOTTKY | y = t_source, x ∈ [W_ap/2, L_domain] | Same as SIDE |
| DRAIN | CT_OHMIC | y = t_perov, x ∈ [0, L_domain] | phims for ohmic |

---

## 4. Material Parameters

### 4.1 Perovskite (MAPbI3-type)

| Parameter | Value | Notes |
|-----------|-------|-------|
| Bandgap E_g | 1.6 eV | Tunable via composition |
| Relative permittivity ε_r | 25-30 | High for perovskites |
| Hole mobility μ_p | 1-10 cm²/Vs | **Critical uncertainty** |
| Effective DOS N_V | ~10^18 cm⁻³ | Valence band DOS |
| Intrinsic doping | p-type, ~10^14-10^16 cm⁻³ | From Au work function |

**Action Item**: Get measured mobility from AMO/TUD. Check vertical vs lateral anisotropy.

### 4.2 Contact Work Functions

| Contact | Material | Work function | Barrier to holes |
|---------|----------|---------------|------------------|
| Source | Au | 5.1-5.4 eV | Φ_Bp ~ 0.3-0.5 eV |
| Drain | Au/other | TBD | Assume ohmic initially |
| Gate | TBD | - | Sets flat-band voltage |

### 4.3 Silicon Dioxide

| Parameter | Value |
|-----------|-------|
| ε_r | 3.9 |
| Bandgap | 9 eV (insulating) |

---

## 5. Mesh Strategy

### 5.1 Critical Regions Requiring Fine Mesh

| Region | Reason | Target spacing |
|--------|--------|----------------|
| Source sidewall (x = W_ap/2) | Injection, steep gradients | Δx ~ 2-5 nm |
| Source top (y = t_source) | Injection boundary | Δy ~ 2-5 nm |
| Oxide-perovskite interface (y = 0) | Accumulation layer | Δy ~ 1-2 nm |
| Source corner | Potential singularity | Fine in both x,y |

### 5.2 Mesh Refinement Specification

```ini
! Source sidewall region (x-direction refinement)
[refine grid]
  dir = 1
  x = 4990, 5010 : nm
  dx = 2, 2 : nm
  e = 1.0

! Source top surface (y-direction refinement)
[refine grid]
  dir = 2
  x = 12, 25 : nm      ! Around t_source = 17 nm
  dx = 2, 2 : nm
  e = 1.0

! Oxide-perovskite interface (y-direction refinement)
[refine grid]
  dir = 2
  x = -5, 10 : nm      ! Around y = 0
  dx = 1, 3 : nm
  e = 1.5

! Bulk perovskite (coarse)
[refine grid]
  dir = 2
  x = 50, 450 : nm
  dx = 20, 20 : nm
  e = 1.0
```

### 5.3 Estimated Mesh Size

| Direction | Range | Fine regions | Coarse regions | Est. points |
|-----------|-------|--------------|----------------|-------------|
| x | 0 - 10 μm | Near x=5μm | Bulk | ~200-300 |
| y | -90 - 500 nm | y=0, y=17nm | Bulk | ~150-200 |
| **Total** | | | | ~30k-60k nodes |

---

## 6. Boundary Conditions Summary

| Boundary | Location | Type | Implementation |
|----------|----------|------|----------------|
| Symmetry | x = 0 | Neumann (∂/∂x = 0) | Natural BC in FVM |
| Gate | y = -t_ox | Dirichlet φ = V_G | CT_GATE contact |
| Source sidewall | x = W_ap/2, y∈[0, t_src] | Robin (Schottky) | CT_SCHOTTKY |
| Source top | y = t_src, x∈[W_ap/2, L] | Robin (Schottky) | CT_SCHOTTKY |
| Drain | y = t_perov | Dirichlet (Ohmic) | CT_OHMIC |
| Right edge | x = L_domain | Neumann | Natural BC |

---

## 7. Simulation Plan

### 7.1 Bias Conditions

| Case | V_S | V_D | V_G | Purpose |
|------|-----|-----|-----|---------|
| Equilibrium | 0 | 0 | 0 | Sanity check, band diagram |
| Transfer | 0 | -2 V | -5 to +5 V sweep | I_D vs V_GS |
| Output | 0 | 0 to -5 V sweep | -2, -3, -4 V | I_D vs V_DS |

**Sign convention**: Negative V_G → hole accumulation. Negative V_D → forward bias for holes.

### 7.2 Key Outputs

1. **Drain current I_D**: Integrate J_p at drain boundary
2. **Transfer characteristics**: I_D(V_G) at fixed V_D
3. **Output characteristics**: I_D(V_D) at fixed V_G
4. **Current density vectors**: J_p(x,y) for flow path visualization
5. **Band diagrams**: Vertical cuts at x=0 (aperture center) and x=W_ap/2 (source edge)
6. **Potential contours**: φ(x,y) for field distribution

---

## 8. Physics Questions to Answer

### Q1: Current Flow Path
Does current:
- (a) Spread laterally in accumulation layer first, then flow up?
- (b) Go mostly straight up from source edge?
- (c) Depend strongly on V_G?

**Diagnostic**: Plot current density vectors, compute lateral vs vertical current fractions.

### Q2: Gate Control Mechanism
Does the gate primarily modulate:
- (a) Schottky barrier via field-assisted lowering (IFBL)?
- (b) Channel conductivity via accumulation?
- (c) Both?

**Diagnostic**: Compare transfer curves with/without IFBL enabled. Analyze voltage drops.

### Q3: Three-Resistance Model Validation
Can device be decomposed into R_Schottky + R_lateral + R_vertical?

**Diagnostic**: Extract effective resistances from I-V curves, compare to analytical estimates.

### Q4: Source Geometry Sensitivity
How does current distribution depend on:
- Source thickness (7 nm vs 17 nm)?
- Aperture width?

**Diagnostic**: Parameter sweeps on geometry.

---

## 9. Implementation Checklist

### Phase 1: Geometry & Mesh
- [x] Create `vfet_a07.ini` configuration file
- [x] Define Poisson regions (oxide + perovskite)
- [x] Define transport region (perovskite only)
- [x] Define all contacts (GATE, SOURCE_SIDE, SOURCE_TOP, DRAIN)
- [x] Set up mesh refinement at critical interfaces
- [ ] Verify mesh quality and convergence

### Phase 2: Material Parameters
- [x] Configure perovskite parameters (E_g, ε_r, μ_p, N_V)
- [x] Configure oxide permittivity
- [x] Set Schottky barrier height for Au/perovskite
- [x] Configure Richardson constants for perovskite

### Phase 3: Initial Simulations
- [ ] Run equilibrium (V=0) case
- [ ] Verify band diagram makes physical sense
- [ ] Check potential distribution in oxide/perovskite
- [ ] Run single bias point to verify convergence

### Phase 4: DC Characterization
- [ ] Transfer curve sweep (I_D vs V_G)
- [ ] Output curve sweep (I_D vs V_D)
- [ ] Extract threshold voltage, on/off ratio
- [ ] Visualize current density patterns

### Phase 5: Physics Analysis
- [ ] Analyze current flow paths at different V_G
- [ ] Compare IFBL on/off to understand gate control mechanism
- [ ] Extract resistance components
- [ ] Validate against analytical estimates

### Phase 6: Parameter Studies
- [ ] Source thickness variation (7 vs 17 nm)
- [ ] Mobility sensitivity study
- [ ] Schottky barrier sensitivity study

---

## 10. Open Questions for A07

1. **Mobility**: Measured hole mobility? Any anisotropy (vertical vs lateral)?
2. **Doping**: Intrinsic carrier concentration in perovskite?
3. **Schottky barrier**: Any Au/perovskite diode I-V measurements?
4. **Drain contact**: Same metal as source? Truly ohmic?
5. **Geometry**: Confirm source finger width (~5 μm estimate)
6. **Flat-band voltage**: What gate metal? Expected V_FB?

---

## 11. File Structure

```
cybear/
├── A07.md                    # This document
├── devices/
│   └── vfet_a07/
│       ├── vfet_a07.ini      # Main configuration (17nm source) ✓ CREATED
│       ├── vfet_a07_7nm.ini  # Variant: 7nm source ✓ CREATED
│       └── run_vfet_a07.ini  # Run configuration ✓ CREATED
├── src/
│   └── ... (existing code, no changes needed)
└── scripts/
    └── plot_vfet_current.py  # Post-processing visualization (TODO)
```

---

## 12. Draft Configuration File

```ini
! Vertical Perovskite FET - A07 Project
! Half-aperture with symmetry at x=0

! === Dimensions (in nm) ===
W_ap_half = 5000    ! Half aperture width
W_src = 5000        ! Source finger width
L_domain = $(W_ap_half + W_src)  ! Total x-domain
t_ox = 90           ! Oxide thickness
t_source = 17       ! Source thickness
t_perov = 500       ! Perovskite thickness

! === Transport Parameters (Perovskite) ===
[transport parameters]
  electrons = false
  holes = true
  N_v0 = 1e18 : 1/cm³
  E_gap = 1.6 : eV
  dos = "parabolic"
  dist = "maxwell"
  mob = false

[grid]
  gtype = "xy"

! === Poisson Regions ===
! Oxide layer
[poisson]
  name = "oxide"
  x = 0, L_domain : nm
  y = -t_ox, 0 : nm
  eps = 3.9 : eps0

! Perovskite layer
[poisson]
  name = "perovskite"
  x = 0, L_domain : nm
  y = 0, t_perov : nm
  eps = 25 : eps0

! === Transport Region (perovskite only) ===
[transport]
  x = 0, L_domain : nm
  y = 0, t_perov : nm

! === Doping ===
[doping]
  x = 0, L_domain : nm
  y = 0, t_perov : nm
  acon = 1e15 : 1/cm³   ! Light p-type background

! === Mobility ===
[mobility]
  x = 0, L_domain : nm
  y = 0, t_perov : nm
  mob_p = 5 : cm²/Vs    ! Placeholder - update with measured value

! === Contacts ===
! Gate (bottom of oxide)
[contact]
  name = "GATE"
  type = "gate"
  x = 0, L_domain : nm
  y = -t_ox, -t_ox : nm
  phims = 0 : eV        ! Adjust for flat-band

! Source sidewall (Schottky)
[contact]
  name = "SOURCE_SIDE"
  type = "schottky"
  x = W_ap_half, W_ap_half : nm
  y = 0, t_source : nm
  phi_b = 0.4 : eV
  A_richardson_p = 32 : A/cm²/K²
  ifbl = true
  tunneling = false

! Source top surface (Schottky)
[contact]
  name = "SOURCE_TOP"
  type = "schottky"
  x = W_ap_half, L_domain : nm
  y = t_source, t_source : nm
  phi_b = 0.4 : eV
  A_richardson_p = 32 : A/cm²/K²
  ifbl = true
  tunneling = false

! Drain (Ohmic)
[contact]
  name = "DRAIN"
  type = "ohmic"
  x = 0, L_domain : nm
  y = t_perov, t_perov : nm
  phims = 0 : eV

! === Mesh Refinement ===
! Source sidewall
[refine grid]
  dir = 1
  x = 4990, 5010 : nm
  dx = 2, 2 : nm
  e = 1.0

! Source top
[refine grid]
  dir = 2
  x = 12, 25 : nm
  dx = 2, 2 : nm
  e = 1.0

! Oxide-perovskite interface
[refine grid]
  dir = 2
  x = -5, 10 : nm
  dx = 1, 3 : nm
  e = 1.5

! Bulk (coarse)
[refine grid]
  dir = 2
  x = 50, 450 : nm
  dx = 20, 20 : nm
  e = 1.0
```

---

## 13. Notes

### Two-Segment Contact Approach
Using separate SOURCE_SIDE and SOURCE_TOP contacts allows:
- Analysis of injection distribution (sidewall vs top)
- Different mesh refinement at each surface
- Potential future extension to different barrier heights

### Gate Contact Validation
The existing CT_GATE implementation is sufficient because:
- It sets Dirichlet BC on potential at gate electrode
- Oxide region is included in Poisson domain (not transport)
- Capacitive coupling through oxide is handled by Poisson solver
- Accumulation/depletion emerges naturally from coupled equations

### Sign Conventions
- Hole current flows from source (V_S=0) to drain (V_D<0)
- Negative V_G creates hole accumulation (p-channel enhancement)
- Current is positive when flowing into drain

---

## 14. References

- TRR404 A07 Meeting Notes
- Existing Schottky implementation: `src/schottky.f90`
- Gate contact implementation: `src/contact.f90`, `src/continuity.f90`
- CLAUDE.md project documentation
